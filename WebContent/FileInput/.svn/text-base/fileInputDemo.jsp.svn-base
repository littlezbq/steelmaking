<%@ page language="java" contentType="text/html; charset=utf-8"%>
<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort()+ path;
%>
<!DOCTYPE html>
<!-- http://localhost:8080/energon/b_ide/bootstrap/module/FileInput/fileInputDemo.jsp-->
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!-- JQUERY -->
<script type="text/javascript" src="<%=basePath%>/b_base/jquery-2.0.0.min.js" charset="utf-8"></script>
<!-- /JQUERY -->

<!-- BOOTSTRAP -->
<link rel="stylesheet" type="text/css" href="css/default.css">
<link href="css/fileinput.css" media="all" rel="stylesheet" type="text/css" />	
<link type="text/css" rel="stylesheet"  href="<%=basePath%>/b_base/bootstrap-3.3.5/css/bootstrap.css"/>
<link type="text/css" rel="stylesheet"  href="<%=basePath%>/b_base/bootstrap-3.3.5/css/bootstrap-theme.min.css"/>
<!-- js -->
<link href="<%=basePath%>/b_ide/bootstrap/module/FileInput/css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
<script src="<%=basePath%>/b_ide/bootstrap/module/FileInput/js/fileinput.js" type="text/javascript"></script>
<script src="<%=basePath%>/b_ide/bootstrap/module/FileInput/js/fileinput_locale_zh.js" type="text/javascript"></script>
</head>
<body>

<%-- <form action="${pageContext.request.contextPath}/servlet/UploadHandleServlet" enctype="multipart/form-data" method="post">
         涓婁紶鐢ㄦ埛锛�<input type="text" name="username"><br/>
         涓婁紶鏂囦欢1锛�<input type="file" name="file1"><br/>
        婁紶鏂囦欢2锛�<input type="file" name="file2"><br/>
	<input type="submit" value="鎻愪氦">
</form> --%>
	<div class="htmleaf-container">
		<div class="container kv-main">
            <!-- <div class="page-header">
            <h2>鍗曞紶涓婁紶 <small></h2>
            </div> -->
            <!-- <form enctype="multipart/form-data" id="uploadForm"  method = "post"> -->
                <input id="fileUpload" class="file" type="file" name="fileUpload"  multiple  data-show-preview="true">
            <!-- </form> -->
        </div>
	</div>
	
    <script>
	    $("#fileUpload").fileinput({
	        language : "zh",//璁剧疆璇█
	        uploadUrl: "${pageContext.request.contextPath}/fileUpload/UploadHandleServlet",//涓婁紶鍦板潃
	        uploadAsync: true,//鍚屾杩樻槸寮傛
	        showCaption:false,//鏄惁鏄剧ず鏍囬
	        showUpload: true,//鏄惁鏄剧ず涓婁紶鎸夐挳
	        browseClass: "btn btn-primary", //鎸夐挳鏍峰紡 
	        allowedFileExtensions : ['jpg', 'png','gif'],//鎺ユ敹鐨勬枃浠跺悗缂�
	        allowedFileTypes: ['image', 'video', 'flash'],//鎺ユ敹鐨勬枃浠剁被鍨媅'image', 'html', 'text', 'video', 'audio', 'flash','object']
	        maxFileCount: 6,//鏈�澶т笂浼犳枃浠舵暟闄愬埗
	        overwriteInitial: false,
	        maxFileSize: 1000, 
	        msgFilesTooMany: "閫夋嫨涓婁紶鐨勬枃浠舵暟閲�({n}) 瓒呰繃鍏佽鐨勬渶澶ф暟鍊納m}锛�",
	        previewFileIcon: '<i class="glyphicon glyphicon-file"></i>', 
	        enctype: 'multipart/form-data',
	        /* allowedPreviewTypes: null, */
	        previewFileIconSettings: {
                'docx': '<i class="glyphicon glyphicon-file"></i>',
                'xlsx': '<i class="glyphicon glyphicon-file"></i>',
                'pptx': '<i class="glyphicon glyphicon-file"></i>',
                'jpg': '<i class="glyphicon glyphicon-picture"></i>',
                'pdf': '<i class="glyphicon glyphicon-file"></i>',
                'zip': '<i class="glyphicon glyphicon-file"></i>'
            }
	        /* ,
            uploadExtraData: function() {
                var extraValue = null;
                var radios = document.getElementsByName('excelType');
                for(var i=0;i<radios.length;i++){
                    if(radios[i].checked){
                        extraValue = radios[i].value;
                    }
                }
                return {"excelType": extraValue};
            } */
	    /*     slugCallback: function(filename) {
	        	console.info(filename);
	            return filename.replace('(', '_').replace(']', '_');
	        }   */
		});
	            
		$("#fileUpload").on("fileuploaded", function(event, data, previewId, index) {
			console.info(event);
			console.info(data.response.obj);
			console.info(previewId);
			console.info(index);
		});
		
		/* $("#fileUpload").off("filepreupload", function(event, data, previewId, index) {
			console.info(event);
			console.info(data.response.obj);
			console.info(previewId);
			console.info(index);
		}); */
	            
		 </script>
	</body>
</html>
